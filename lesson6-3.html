<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>STORTHUB - –£—Ä–æ–∫ 6: –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤</title>
    <link rel="stylesheet" href="css/reset.css" />
    <link rel="stylesheet" href="css/slick.css" />
    <link rel="stylesheet" href="css/jquery.fancybox.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="css/style.css" />
  </head>

  <body>
    <header class="header">
      <div class="container">
        <div class="header_inner">
          <a href="index.html" class="logo">STORT<span>HUB</span></a>
          <div class="exit">
            <p class="nameuser">–ú–∏—Å–∞–π–ª–æ–≤ –†–∞–π—Ñ</p>
            <a href="#" class="iconexit">üö™</a>
          </div>
        </div>
      </div>
    </header>

    <div class="content">
      <div class="container">
        <div class="content_inner">
          <div class="menu">
            <div class="class-switch">
              <button class="switch-btn active" data-href="index.html">
                5 –∫–ª–∞—Å—Å
              </button>
              <button class="switch-btn" data-href="2lesson.html">
                6 –∫–ª–∞—Å—Å
              </button>
            </div>
            <ul class="lesson-list">
              <li data-href="lesson0.html">–í–≤–µ–¥–µ–Ω–∏–µ</li>
              <li data-href="index.html">
                –£—Ä–æ–∫ 1. –ë–∞–∑–æ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤ –∫–∞–±–∏–Ω–µ—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∏
              </li>
              <li data-href="lesson2.html">–£—Ä–æ–∫ 2. –≠—Ä–≥–æ–Ω–æ–º–∏–∫–∞</li>
              <li data-href="lesson3.html">
                –£—Ä–æ–∫ 3. –ö–∏–±–µ—Ä-–≥–∏–≥–∏–µ–Ω–∞ –∏ –∑–∞—â–∏—Ç–∞ –ª–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
              </li>
              <li data-href="lesson4.html">
                –£—Ä–æ–∫ 4. –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ–º–ø—å—é—Ç–µ—Ä—ã: –ê–ø–ø–∞—Ä–∞—Ç–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ
              </li>
              <li data-href="lesson5.html">
                –£—Ä–æ–∫ 5. –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ–º–ø—å—é—Ç–µ—Ä—ã: –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ
              </li>
              <li data-href="lesson6.html" class="active">–£—Ä–æ–∫ 6. –ê–ª–≥–æ—Ä–∏—Ç–º—ã</li>
            </ul>
          </div>

          <div class="content_games">
            <div class="algorithm-builder">
              <h2>üß© –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤</h2>
              <p>
                –°–æ–∑–¥–∞–π –∞–ª–≥–æ—Ä–∏—Ç–º "–ö–∞–∫ –ø—Ä–∏–≥–æ—Ç–æ–≤–∏—Ç—å —á–∞–π", –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞—è —à–∞–≥–∏ –≤
                –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ!
              </p>

              <div class="algorithm-workspace">
                <div class="steps-bank">
                  <h3>üì¶ –î–æ—Å—Ç—É–ø–Ω—ã–µ —à–∞–≥–∏:</h3>
                  <div class="draggable-steps">
                    <div class="step-card" draggable="true" data-step="1">
                      <span class="step-icon">üíß</span>
                      <span class="step-text">–ù–∞–ª–∏—Ç—å –≤–æ–¥—É –≤ —á–∞–π–Ω–∏–∫</span>
                    </div>
                    <div class="step-card" draggable="true" data-step="2">
                      <span class="step-icon">üî•</span>
                      <span class="step-text">–í–∫–ª—é—á–∏—Ç—å —á–∞–π–Ω–∏–∫</span>
                    </div>
                    <div class="step-card" draggable="true" data-step="3">
                      <span class="step-icon">‚òï</span>
                      <span class="step-text"
                        >–ü–æ–ª–æ–∂–∏—Ç—å —á–∞–π–Ω—ã–π –ø–∞–∫–µ—Ç–∏–∫ –≤ —á–∞—à–∫—É</span
                      >
                    </div>
                    <div class="step-card" draggable="true" data-step="4">
                      <span class="step-icon">‚è∞</span>
                      <span class="step-text">–î–æ–∂–¥–∞—Ç—å—Å—è –∑–∞–∫–∏–ø–∞–Ω–∏—è –≤–æ–¥—ã</span>
                    </div>
                    <div class="step-card" draggable="true" data-step="5">
                      <span class="step-icon">üåä</span>
                      <span class="step-text">–ó–∞–ª–∏—Ç—å –∫–∏–ø—è—Ç–∫–æ–º —á–∞—à–∫—É</span>
                    </div>
                    <div class="step-card" draggable="true" data-step="6">
                      <span class="step-icon">‚åõ</span>
                      <span class="step-text">–ù–∞—Å—Ç–æ—è—Ç—å —á–∞–π 3-5 –º–∏–Ω—É—Ç</span>
                    </div>
                    <div class="step-card" draggable="true" data-step="7">
                      <span class="step-icon">üóëÔ∏è</span>
                      <span class="step-text">–£–±—Ä–∞—Ç—å —á–∞–π–Ω—ã–π –ø–∞–∫–µ—Ç–∏–∫</span>
                    </div>
                  </div>
                </div>

                <div class="algorithm-sequence">
                  <h3>üìã –¢–≤–æ–π –∞–ª–≥–æ—Ä–∏—Ç–º:</h3>
                  <div class="drop-zone" id="algorithmZone">
                    <div class="empty-message">
                      –ü–µ—Ä–µ—Ç–∞—â–∏ —Å—é–¥–∞ —à–∞–≥–∏ –∞–ª–≥–æ—Ä–∏—Ç–º–∞ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ
                    </div>
                  </div>
                  <div class="algorithm-controls">
                    <button id="checkAlgorithm" class="check-btn" disabled>
                      –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–ª–≥–æ—Ä–∏—Ç–º
                    </button>
                    <button id="clearAlgorithm" class="clear-btn">
                      –û—á–∏—Å—Ç–∏—Ç—å
                    </button>
                  </div>
                </div>
              </div>

              <div
                class="algorithm-result"
                id="algorithmResult"
                style="display: none"
              >
                <div class="result-content">
                  <h3 id="resultTitle">–†–µ–∑—É–ª—å—Ç–∞—Ç</h3>
                  <p id="resultMessage">–°–æ–æ–±—â–µ–Ω–∏–µ</p>
                  <div id="resultDetails"></div>
                </div>
              </div>
            </div>

            <img
              src="images/arrow.png"
              alt="–î–∞–ª–µ–µ"
              class="arrow"
              id="next-arrow"
              style="display: none"
            />
          </div>
        </div>
      </div>
    </div>

    <!-- Modal for tooltips -->
    <div id="tooltipOverlay" class="tooltip-overlay"></div>
    <div id="tooltipModal" class="tooltip-modal"></div>

    <style>
      .algorithm-builder {
        padding: 30px;
        background: linear-gradient(135deg, #f8f9fa, #e9ecef);
        border-radius: 20px;
        margin: 20px;
      }

      .algorithm-builder h2 {
        color: #4d36db;
        text-align: center;
        margin-bottom: 10px;
        font-size: 28px;
      }

      .algorithm-builder > p {
        text-align: center;
        color: #666;
        margin-bottom: 30px;
        font-size: 16px;
      }

      .algorithm-workspace {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 30px;
        margin-bottom: 30px;
      }

      .steps-bank,
      .algorithm-sequence {
        background: white;
        padding: 20px;
        border-radius: 15px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      }

      .steps-bank h3,
      .algorithm-sequence h3 {
        color: #4d36db;
        margin-bottom: 15px;
        font-size: 18px;
      }

      .draggable-steps {
        display: flex;
        flex-direction: column;
        gap: 10px;
      }

      .step-card {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 12px;
        background: #f8f9fa;
        border: 2px solid #e9ecef;
        border-radius: 10px;
        cursor: grab;
        transition: all 0.3s ease;
        user-select: none;
      }

      .step-card:hover {
        border-color: #4d36db;
        background: #e8f0fe;
        transform: translateY(-2px);
      }

      .step-card:active {
        cursor: grabbing;
      }

      .step-card.dragging {
        opacity: 0.5;
        transform: rotate(5deg);
      }

      .step-icon {
        font-size: 20px;
        flex-shrink: 0;
      }

      .step-text {
        font-weight: 500;
        color: #333;
      }

      .drop-zone {
        min-height: 300px;
        border: 2px dashed #ddd;
        border-radius: 10px;
        padding: 15px;
        position: relative;
      }

      .drop-zone.drag-over {
        border-color: #4d36db;
        background: #e8f0fe;
      }

      .empty-message {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        color: #999;
        text-align: center;
        font-style: italic;
      }

      .drop-zone .step-card {
        margin-bottom: 8px;
        position: relative;
      }

      .drop-zone .step-card::before {
        content: attr(data-position);
        position: absolute;
        left: -25px;
        top: 50%;
        transform: translateY(-50%);
        background: #4d36db;
        color: white;
        border-radius: 50%;
        width: 20px;
        height: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 12px;
        font-weight: bold;
      }

      .algorithm-controls {
        margin-top: 20px;
        display: flex;
        gap: 10px;
        justify-content: center;
      }

      .check-btn,
      .clear-btn {
        padding: 12px 24px;
        border: none;
        border-radius: 8px;
        font-family: 'Montserrat', sans-serif;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .check-btn {
        background: linear-gradient(135deg, #28a745, #20c997);
        color: white;
      }

      .check-btn:disabled {
        background: #e9ecef;
        color: #6c757d;
        cursor: not-allowed;
      }

      .check-btn:not(:disabled):hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(40, 167, 69, 0.3);
      }

      .clear-btn {
        background: #f8f9fa;
        color: #6c757d;
        border: 2px solid #dee2e6;
      }

      .clear-btn:hover {
        background: #e9ecef;
      }

      .algorithm-result {
        background: white;
        padding: 25px;
        border-radius: 15px;
        text-align: center;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      }

      .algorithm-result.success {
        background: linear-gradient(135deg, #d4edda, #c3e6cb);
        border: 2px solid #28a745;
      }

      .algorithm-result.error {
        background: linear-gradient(135deg, #f8d7da, #f5c6cb);
        border: 2px solid #dc3545;
      }

      .result-content h3 {
        margin-bottom: 10px;
        font-size: 20px;
      }

      .result-content p {
        margin-bottom: 15px;
        font-size: 16px;
      }

      #resultDetails {
        text-align: left;
        background: rgba(255, 255, 255, 0.7);
        padding: 15px;
        border-radius: 8px;
        margin-top: 15px;
      }

      @media (max-width: 768px) {
        .algorithm-workspace {
          grid-template-columns: 1fr;
          gap: 20px;
        }

        .algorithm-builder {
          padding: 20px;
          margin: 10px;
        }

        .step-card {
          padding: 10px;
          gap: 8px;
        }

        .step-icon {
          font-size: 18px;
        }

        .step-text {
          font-size: 14px;
        }
      }
    </style>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="js/slick.min.js"></script>
    <script src="js/jquery.fancybox.min.js"></script>
    <script src="js/help.js"></script>
    <script src="js/main.js"></script>

    <script>
      document.addEventListener('DOMContentLoaded', function () {
        const correctOrder = [1, 3, 2, 4, 5, 6, 7]; // –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —à–∞–≥–æ–≤
        let algorithmSteps = [];

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è drag & drop
        initializeDragAndDrop();

        function initializeDragAndDrop() {
          const stepCards = document.querySelectorAll('.step-card');
          const dropZone = document.getElementById('algorithmZone');

          stepCards.forEach(card => {
            card.addEventListener('dragstart', handleDragStart);
            card.addEventListener('dragend', handleDragEnd);
          });

          dropZone.addEventListener('dragover', handleDragOver);
          dropZone.addEventListener('drop', handleDrop);
          dropZone.addEventListener('dragenter', handleDragEnter);
          dropZone.addEventListener('dragleave', handleDragLeave);
        }

        function handleDragStart(e) {
          this.classList.add('dragging');
          e.dataTransfer.setData('text/plain', this.dataset.step);
          e.dataTransfer.setData('text/html', this.outerHTML);
        }

        function handleDragEnd(e) {
          this.classList.remove('dragging');
        }

        function handleDragOver(e) {
          e.preventDefault();
        }

        function handleDragEnter(e) {
          e.preventDefault();
          this.classList.add('drag-over');
        }

        function handleDragLeave(e) {
          if (!this.contains(e.relatedTarget)) {
            this.classList.remove('drag-over');
          }
        }

        function handleDrop(e) {
          e.preventDefault();
          this.classList.remove('drag-over');

          const stepId = e.dataTransfer.getData('text/plain');
          const stepHtml = e.dataTransfer.getData('text/html');

          if (stepId) {
            addStepToAlgorithm(stepId, stepHtml);
            hideOriginalStep(stepId);
          }
        }

        function addStepToAlgorithm(stepId, stepHtml) {
          const dropZone = document.getElementById('algorithmZone');
          const emptyMessage = dropZone.querySelector('.empty-message');

          if (emptyMessage) {
            emptyMessage.style.display = 'none';
          }

          // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç
          const stepElement = document.createElement('div');
          stepElement.innerHTML = stepHtml;
          const newCard = stepElement.firstElementChild;

          // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏
          algorithmSteps.push(parseInt(stepId));
          newCard.setAttribute('data-position', algorithmSteps.length);

          // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É —É–¥–∞–ª–µ–Ω–∏—è
          const removeBtn = document.createElement('button');
          removeBtn.innerHTML = '‚ùå';
          removeBtn.className = 'remove-step-btn';
          removeBtn.style.cssText = `
          position: absolute;
          top: -5px;
          right: -5px;
          background: #dc3545;
          color: white;
          border: none;
          border-radius: 50%;
          width: 20px;
          height: 20px;
          font-size: 12px;
          cursor: pointer;
        `;

          removeBtn.addEventListener('click', () =>
            removeStepFromAlgorithm(newCard, stepId)
          );
          newCard.appendChild(removeBtn);

          // –£–±–∏—Ä–∞–µ–º drag —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
          newCard.draggable = false;
          newCard.style.cursor = 'default';

          dropZone.appendChild(newCard);
          updateCheckButton();
        }

        function removeStepFromAlgorithm(stepElement, stepId) {
          const index = algorithmSteps.indexOf(parseInt(stepId));
          if (index > -1) {
            algorithmSteps.splice(index, 1);
          }

          stepElement.remove();
          showOriginalStep(stepId);
          updatePositions();
          updateCheckButton();

          const dropZone = document.getElementById('algorithmZone');
          if (algorithmSteps.length === 0) {
            dropZone.querySelector('.empty-message').style.display = 'block';
          }
        }

        function hideOriginalStep(stepId) {
          const originalStep = document.querySelector(
            `.draggable-steps .step-card[data-step="${stepId}"]`
          );
          if (originalStep) {
            originalStep.style.display = 'none';
          }
        }

        function showOriginalStep(stepId) {
          const originalStep = document.querySelector(
            `.draggable-steps .step-card[data-step="${stepId}"]`
          );
          if (originalStep) {
            originalStep.style.display = 'flex';
          }
        }

        function updatePositions() {
          const dropZone = document.getElementById('algorithmZone');
          const steps = dropZone.querySelectorAll('.step-card');
          steps.forEach((step, index) => {
            step.setAttribute('data-position', index + 1);
          });
        }

        function updateCheckButton() {
          const checkBtn = document.getElementById('checkAlgorithm');
          checkBtn.disabled = algorithmSteps.length === 0;
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–ª–≥–æ—Ä–∏—Ç–º–∞
        document
          .getElementById('checkAlgorithm')
          .addEventListener('click', checkAlgorithm);

        function checkAlgorithm() {
          const resultDiv = document.getElementById('algorithmResult');
          const isCorrect =
            JSON.stringify(algorithmSteps) === JSON.stringify(correctOrder);

          if (isCorrect) {
            showResult(
              true,
              'üéâ –û—Ç–ª–∏—á–Ω–æ!',
              '–¢—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å–æ—Å—Ç–∞–≤–∏–ª –∞–ª–≥–æ—Ä–∏—Ç–º –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è —á–∞—è!'
            );
            document.getElementById('next-arrow').style.display = 'block';
          } else {
            showResult(
              false,
              '‚ùå –ù–µ —Å–æ–≤—Å–µ–º –≤–µ—Ä–Ω–æ',
              '–ü–æ–ø—Ä–æ–±—É–π –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—è–¥–æ–∫ —à–∞–≥–æ–≤. –ü–æ–¥—É–º–∞–π –æ –ª–æ–≥–∏—á–µ—Å–∫–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –¥–µ–π—Å—Ç–≤–∏–π.'
            );
          }

          resultDiv.style.display = 'block';
        }

        function showResult(isSuccess, title, message) {
          const resultDiv = document.getElementById('algorithmResult');
          const resultTitle = document.getElementById('resultTitle');
          const resultMessage = document.getElementById('resultMessage');
          const resultDetails = document.getElementById('resultDetails');

          resultDiv.className = `algorithm-result ${
            isSuccess ? 'success' : 'error'
          }`;
          resultTitle.textContent = title;
          resultMessage.textContent = message;

          if (!isSuccess) {
            resultDetails.innerHTML = `
            <h4>–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:</h4>
            <ol>
              <li>üíß –ù–∞–ª–∏—Ç—å –≤–æ–¥—É –≤ —á–∞–π–Ω–∏–∫</li>
              <li>‚òï –ü–æ–ª–æ–∂–∏—Ç—å —á–∞–π–Ω—ã–π –ø–∞–∫–µ—Ç–∏–∫ –≤ —á–∞—à–∫—É</li>
              <li>üî• –í–∫–ª—é—á–∏—Ç—å —á–∞–π–Ω–∏–∫</li>
              <li>‚è∞ –î–æ–∂–¥–∞—Ç—å—Å—è –∑–∞–∫–∏–ø–∞–Ω–∏—è –≤–æ–¥—ã</li>
              <li>üåä –ó–∞–ª–∏—Ç—å –∫–∏–ø—è—Ç–∫–æ–º —á–∞—à–∫—É</li>
              <li>‚åõ –ù–∞—Å—Ç–æ—è—Ç—å —á–∞–π 3-5 –º–∏–Ω—É—Ç</li>
              <li>üóëÔ∏è –£–±—Ä–∞—Ç—å —á–∞–π–Ω—ã–π –ø–∞–∫–µ—Ç–∏–∫</li>
            </ol>
          `;
          } else {
            resultDetails.innerHTML =
              '<p>–¢–µ–ø–µ—Ä—å —Ç—ã –ø–æ–Ω–∏–º–∞–µ—à—å, –∫–∞–∫ –≤–∞–∂–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ —à–∞–≥–æ–≤ –≤ –∞–ª–≥–æ—Ä–∏—Ç–º–µ!</p>';
          }
        }

        // –û—á–∏—Å—Ç–∫–∞ –∞–ª–≥–æ—Ä–∏—Ç–º–∞
        document
          .getElementById('clearAlgorithm')
          .addEventListener('click', clearAlgorithm);

        function clearAlgorithm() {
          const dropZone = document.getElementById('algorithmZone');
          const stepCards = dropZone.querySelectorAll('.step-card');

          stepCards.forEach(card => {
            const stepId = card.dataset.step;
            showOriginalStep(stepId);
            card.remove();
          });

          algorithmSteps = [];
          dropZone.querySelector('.empty-message').style.display = 'block';
          document.getElementById('algorithmResult').style.display = 'none';
          updateCheckButton();
        }
      });
    </script>
  </body>
</html>
